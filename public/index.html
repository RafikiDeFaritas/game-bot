<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Contr√¥le du Bot</title>
</head>
<body>
  <h1>Contr√¥le manuel du bot</h1>

  <div style="display: flex; flex-direction: column; align-items: center;">
    <button onclick="send('UP')">‚¨ÜÔ∏è UP</button>
    <div>
      <button onclick="send('LEFT')">‚¨ÖÔ∏è LEFT</button>
      <button onclick="send('STAY')">‚è∏ STAY</button>
      <button onclick="send('RIGHT')">‚û°Ô∏è RIGHT</button>
    </div>
    <button onclick="send('DOWN')">‚¨áÔ∏è DOWN</button>
    <br />
    <button onclick="sendAction('COLLECT')">ü™ô COLLECT</button>
  </div>

  <script>
    async function send(move) {
      const response = await fetch('/manual-action', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ move, action: 'NONE' })
      });
      const data = await response.json();
      console.log('R√©ponse du bot :', data);
    }

    async function sendAction(action) {
      const response = await fetch('/manual-action', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ move: 'STAY', action })
      });
      const data = await response.json();
      console.log('R√©ponse du bot :', data);
    }
  </script>
</body>

<script>
  document.addEventListener('keydown', (event) => {
    switch (event.key) {
      case 'ArrowUp':
        send('UP');
        break;
      case 'ArrowDown':
        send('DOWN');
        break;
      case 'ArrowLeft':
        send('LEFT');
        break;
      case 'ArrowRight':
        send('RIGHT');
        break;
      case ' ': // espace
        event.preventDefault(); // √©vite le scroll
        sendAction('COLLECT');
        break;
    }
  });

  async function send(move) {
    const res = await fetch('/manual-action', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ move, action: 'NONE' })
    });
    const data = await res.json();
    console.log('[Clavier] Move:', data);
  }

  async function sendAction(action) {
    const res = await fetch('/manual-action', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ move: 'STAY', action })
    });
    const data = await res.json();
    console.log('[Clavier] Action:', data);
  }
</script>


</html>
